# DTG Backend Environment Variables
# Copy to .env and update values for your environment

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3000
NODE_ENV=development

# =============================================================================
# Database Configuration
# =============================================================================
# For Docker: use service names (postgres, redis)
# For local dev: use localhost
DATABASE_URL=postgresql://dtg_user:dtg_dev_password@localhost:5432/dtg
REDIS_URL=redis://localhost:6379

# =============================================================================
# Security - MUST CHANGE IN PRODUCTION
# =============================================================================
# JWT secret for token signing (min 32 chars, use random string)
# Generate with: openssl rand -base64 48
JWT_SECRET=CHANGE_ME_IN_PRODUCTION_USE_RANDOM_64_CHAR_STRING

# CORS origin for admin panel (production: your actual domain)
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# Biometric Microservice
# =============================================================================
# For Docker: http://biometric-service:8000
# For local dev: http://localhost:8000
BIOMETRIC_SERVICE_URL=http://localhost:8000
BIOMETRIC_TIMEOUT_MS=15000
BIOMETRIC_MAX_RETRIES=2

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# Privacy Settings
# =============================================================================
# Minimum votes before results shown (k-anonymity threshold)
# Production: 30 minimum (enforced at startup)
# Development: can be lower for testing
MIN_K_ANONYMITY=30

# =============================================================================
# Blockchain (MVP Placeholder)
# =============================================================================
BLOCKCHAIN_PROVIDER=http://localhost:8545
CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=info

# =============================================================================
# User Privacy & Hashing - CRITICAL: Generate unique secrets for production
# =============================================================================
# Each secret should be unique and generated securely:
#   openssl rand -base64 32
# These secrets are used for irreversible hashing - losing them means data loss
PN_HASH_SECRET=dev_pn_hash_secret_change_me
API_KEY_ENCRYPTION_SECRET=dev_api_key_enc_secret_change_me_32+chars
DEVICE_HASH_SECRET=dev_device_secret_change_me
VOTER_HASH_SECRET=dev_voter_secret_change_me

# =============================================================================
# Production Checklist (remove this section when deploying)
# =============================================================================
# [ ] All *_SECRET variables regenerated with `openssl rand -base64 48`
# [ ] NODE_ENV=production
# [ ] CORS_ORIGIN set to actual admin domain
# [ ] MIN_K_ANONYMITY >= 30
# [ ] Database credentials rotated from defaults
# [ ] SSL/TLS configured at load balancer
# [ ] Secrets stored in secure vault (not in .env file)
