# =============================================================================
# DTG Environment Configuration Example
# =============================================================================
# Copy this file to .env and update values for your environment.
#
# ARCHITECTURE:
# - Docker provides: postgres, redis, biometric-service
# - Backend and Admin run LOCALLY from their repo folders
# - Backend connects to Docker services via localhost ports
# =============================================================================

# =============================================================================
# Database Configuration
# =============================================================================
# Must match docker-compose.yml credentials
DATABASE_URL=postgresql://dtg_user:dtg_dev_password@localhost:5432/dtg

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379

# =============================================================================
# Biometric Service
# =============================================================================
# For local dev: http://localhost:8000 (Docker exposes port 8000)
BIOMETRIC_SERVICE_URL=http://localhost:8000
BIOMETRIC_TIMEOUT_MS=15000
BIOMETRIC_MAX_RETRIES=2

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3000
NODE_ENV=development

# =============================================================================
# Security - MUST CHANGE IN PRODUCTION
# =============================================================================
# JWT secret for token signing (min 32 chars, use random string)
JWT_SECRET=CHANGE_ME_IN_PRODUCTION_USE_RANDOM_64_CHAR_STRING

# CORS origin for admin panel
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# Privacy & Hashing Secrets (REQUIRED)
# =============================================================================
# These secrets are used for hashing PII and encrypting API keys
# MUST be changed in production and kept secure

# Personal Number hashing secret
PN_HASH_SECRET=dev_pn_hash_secret_change_in_production

# API key encryption secret (min 32 chars)
API_KEY_ENCRYPTION_SECRET=dev_api_key_encryption_secret_32chars!

# Device identifier hashing secret
DEVICE_HASH_SECRET=dev_device_hash_secret_change_me

# Voter identity hashing secret
VOTER_HASH_SECRET=dev_voter_hash_secret_change_me

# =============================================================================
# Privacy Settings
# =============================================================================
# Minimum votes before results shown (k-anonymity threshold)
# Production: 30 minimum (enforced at startup)
MIN_K_ANONYMITY=30

# =============================================================================
# Admin Auth
# =============================================================================
ADMIN_EMAIL=admin@example.com

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# Blockchain (MVP Placeholder)
# =============================================================================
BLOCKCHAIN_PROVIDER=http://localhost:8545
CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# =============================================================================
# VPN Detection APIs (Optional)
# =============================================================================
# IPQUALITYSCORE_API_KEY=your_key_here
# IPHUB_API_KEY=your_key_here
# PROXYCHECK_API_KEY=your_key_here

# =============================================================================
# Firebase Push Notifications (Optional)
# =============================================================================
# FIREBASE_DISABLED=false
# FIREBASE_SERVICE_ACCOUNT_JSON={"type":"service_account",...}
# FIREBASE_SERVICE_ACCOUNT_PATH=/path/to/service-account.json

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=info
